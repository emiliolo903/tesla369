<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tesla Pro + Hist√≥rico Poseada</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:#111;color:#fff;display:flex;justify-content:center;padding:20px;}
.container{width:100%;max-width:500px;text-align:center;}
h1{color:#00F5E0;font-size:28px;margin-bottom:20px;}
h2{color:#FFD700;font-size:22px;margin-bottom:10px;}
input, textarea{width:80%;padding:12px;font-size:18px;border-radius:8px;border:none;margin-bottom:15px;}
textarea{height:120px;}
button{width:85%;padding:14px;font-size:18px;background:#00F5E0;color:#111;border:none;border-radius:10px;cursor:pointer;margin-bottom:20px;}
.resultado{background:#222;padding:15px;border-radius:12px;margin-bottom:15px;text-align:left;font-size:18px;}
.resultado span{color:#00FFAA;font-weight:bold;}
.poseada{margin-top:30px;}
.nota{font-size:14px;color:#aaa;margin-top:10px;}
.historial{margin-top:20px;padding:15px;background:#222;border-radius:12px;}
.historial textarea{width:90%;}
</style>
</head>

<body>
<div class="container">
<h1>‚ö° Tesla Pro + Hist√≥rico Poseada</h1>

<h2>Quiniela Tradicional (M√©todo Tesla)</h2>
<input type="text" id="inputTradicional" placeholder="Ingres√° un n√∫mero de 4 cifras">
<button onclick="generarTradicional()">Generar Tradicional</button>
<div id="resultadosTradicional"></div>

<div class="poseada">
<h2>Quiniela Poseada Correntina</h2>
<input type="text" id="inputPoseada" placeholder="Ingres√° los 10 n√∫meros del sorteo anterior (00-99)">
<button onclick="generarPoseada()">Generar 2 jugadas Tesla</button>
<div class="nota">Poseada Correntina usando m√©todo Tesla puro.</div>
<div id="resultadosPoseada"></div>
</div>

<div class="historial">
<h2>Hist√≥rico Poseada (√∫ltimas 20 jugadas)</h2>
<textarea id="inputHistorico" placeholder="Peg√° ac√° las 20 jugadas (10 n√∫meros por l√≠nea)"></textarea>
<button onclick="guardarHistorico()">Guardar Hist√≥rico</button>
<div class="nota">El hist√≥rico queda guardado aunque cierres o deslices.</div>
</div>

<script>
const tablaTesla = {0:['0','0'],1:['0','0'],2:['5','7'],3:['8','0'],4:['6','9'],5:['2','7'],6:['4','9'],7:['5','2'],8:['3','0'],9:['3','4']};

let historicoPoseada = JSON.parse(localStorage.getItem('historicoPoseada')) || [];

/* üîí CARGAR HIST√ìRICO AL ABRIR (CLAVE) */
window.addEventListener("load", () => {
  if (historicoPoseada.length > 0) {
    document.getElementById("inputHistorico").value =
      historicoPoseada.map(j => j.join(" ")).join("\n");
  }
});

/* TRADICIONAL */
function generarTradicional(){
  const nro=document.getElementById('inputTradicional').value;
  if(nro.length!==4 || isNaN(nro)){alert('N√∫mero inv√°lido');return;}
  let html='';
  for(let i=0;i<2;i++){
    let cuaterno='';
    for(let j=0;j<4;j++){
      cuaterno+=tablaTesla[nro[j]][i%2];
    }
    html+=`<div class="resultado">Cuaterno: <span>${cuaterno}</span></div>`;
  }
  document.getElementById('resultadosTradicional').innerHTML=html;
}

/* POSEADA */
function generarPoseada(){
  let input=document.getElementById('inputPoseada').value.split(/[\s,]+/).map(n=>n.padStart(2,'0'));
  if(input.length!==10){alert('Deben ser 10 n√∫meros');return;}

  historicoPoseada.push(input);
  if(historicoPoseada.length>20) historicoPoseada.shift();
  localStorage.setItem('historicoPoseada', JSON.stringify(historicoPoseada));

  let freq={};
  historicoPoseada.flat().forEach(n=>freq[n]=(freq[n]||0)+1);
  let orden=Object.keys(freq).sort((a,b)=>freq[b]-freq[a]);

  let principal=orden.slice(0,5);
  let respaldo=orden.slice(5,10);

  document.getElementById('resultadosPoseada').innerHTML=
    `<div class="resultado">Principal: <span>${principal.join(" - ")}</span></div>
     <div class="resultado">Respaldo: <span>${respaldo.join(" - ")}</span></div>`;
}

/* GUARDAR 20 JUGADAS MANUAL */
function guardarHistorico(){
  let lineas=document.getElementById('inputHistorico').value.split("\n").map(l=>l.trim()).filter(l=>l);
  if(lineas.length!==20){alert("Deben ser 20 jugadas");return;}

  historicoPoseada=lineas.map(l=>l.split(/[\s,]+/).map(n=>n.padStart(2,'0')));
  localStorage.setItem('historicoPoseada', JSON.stringify(historicoPoseada));
  alert("Hist√≥rico guardado y protegido");
}
</script>
</body>
</html>
