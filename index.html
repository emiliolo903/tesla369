<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tesla Pro + Hist√≥rico Poseada</title>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#111;color:#fff;display:flex;justify-content:center;padding:20px}
.container{width:100%;max-width:520px;text-align:center}
h1{color:#00F5E0;font-size:28px;margin-bottom:20px}
h2{color:#FFD700;font-size:22px;margin-bottom:10px}
input,textarea{width:85%;padding:12px;font-size:18px;border-radius:8px;border:none;margin-bottom:15px}
textarea{height:120px}
button{width:90%;padding:14px;font-size:18px;background:#00F5E0;color:#111;border:none;border-radius:10px;cursor:pointer;margin-bottom:20px}
.resultado{background:#222;padding:15px;border-radius:12px;margin-bottom:15px;text-align:left;font-size:17px}
.resultado span{color:#00FFAA;font-weight:bold}
.poseada{margin-top:30px}
.nota{font-size:14px;color:#aaa;margin-top:10px}
.historial{margin-top:25px;padding:15px;background:#222;border-radius:12px}
.historial textarea{width:95%}
</style>
</head>

<body>
<div class="container">

<h1>‚ö° Tesla Pro + Hist√≥rico Poseada</h1>

<!-- TRADICIONAL -->
<h2>Quiniela Tradicional (M√©todo Tesla)</h2>
<input type="text" id="inputTradicional" placeholder="Ingres√° un n√∫mero de 4 cifras">
<button onclick="generarTradicional()">Generar Tradicional</button>
<div id="resultadosTradicional"></div>

<!-- POSEADA -->
<div class="poseada">
<h2>Quiniela Poseada Correntina</h2>
<input type="text" id="inputPoseada" placeholder="Ingres√° los 10 n√∫meros del sorteo anterior (00‚Äì99)">
<button onclick="generarPoseada()">Generar Poseada Tesla</button>
<div class="nota">M√©todo Tesla puro + hist√≥rico autom√°tico (20 jugadas)</div>
<div id="resultadosPoseada"></div>
</div>

<!-- HISTORICO -->
<div class="historial">
<h2>Hist√≥rico Poseada (20 jugadas)</h2>
<textarea id="inputHistorico" placeholder="Peg√° ac√° las 20 jugadas (10 n√∫meros por l√≠nea)"></textarea>
<button onclick="guardarHistorico()">Guardar Hist√≥rico</button>
<div class="nota">El hist√≥rico queda guardado aunque cierres la app</div>
</div>

</div>

<script>
/* ================== DATOS BASE ================== */
const tablaTesla={0:['0','0'],1:['0','0'],2:['5','7'],3:['8','0'],4:['6','9'],5:['2','7'],6:['4','9'],7:['5','2'],8:['3','0'],9:['3','4']}
const agencias=["Corrientes","Ciudad","Bonaerense","Santa Fe","C√≥rdoba","Entre R√≠os","Chaco"]
let historicoPoseada=JSON.parse(localStorage.getItem("historicoPoseada"))||[]

/* ================== UTILIDADES ================== */
function energia(num){
  let s=num.split('').reduce((a,b)=>a+parseInt(b),0)
  if(s%3===0)return"‚òÄÔ∏è Ma√±ana"
  if(s%3===1)return"üåÜ Tarde"
  return"üåô Noche"
}
function agencia(num){return agencias[parseInt(num[0])%agencias.length]}
function sugerencia(c,t,a){
  if(new Set(c).size===4)return"üéØ Cuaterno"
  if(new Set(t).size===3)return"‚úÖ Terno"
  return"‚ö° Ambos"
}

/* ================== TRADICIONAL ================== */
function generarTradicional(){
  const nro=document.getElementById("inputTradicional").value
  if(nro.length!==4||isNaN(nro)){alert("Ingres√° un n√∫mero v√°lido");return}

  let html=""
  for(let i=0;i<2;i++){
    let c="",t=""
    for(let j=0;j<4;j++){
      c+=tablaTesla[nro[j]][i%2]
      if(j>0)t+=tablaTesla[nro[j]][i%2]
    }
    let a=c.slice(2,4)
    html+=`
    <div class="resultado">
    <strong>Jugada ${i+1}</strong><br>
    Cuaterno: <span>${c}</span> (${energia(c)}) ‚Äì ${agencia(c)}<br>
    Terno: <span>${t}</span> (${energia(t)}) ‚Äì ${agencia(t)}<br>
    Ambos: <span>${a}</span> (${energia(a)}) ‚Äì ${agencia(a)}<br>
    Sugerencia: <span>${sugerencia(c,t,a)}</span>
    </div>`
  }
  document.getElementById("resultadosTradicional").innerHTML=html
}

/* ================== POSEADA ================== */
function generarPoseada(){
  let input=document.getElementById("inputPoseada").value.split(/[\s,]+/).map(n=>n.padStart(2,"0"))
  if(input.length!==10){alert("Deben ser 10 n√∫meros");return}

  historicoPoseada.push(input)
  if(historicoPoseada.length>20)historicoPoseada.shift()
  localStorage.setItem("historicoPoseada",JSON.stringify(historicoPoseada))

  let freq={}
  historicoPoseada.flat().forEach(n=>freq[n]=(freq[n]||0)+1)
  let orden=Object.keys(freq).sort((a,b)=>freq[b]-freq[a])

  let principal=orden.slice(0,5)
  let respaldo=orden.slice(5,10)

  document.getElementById("resultadosPoseada").innerHTML=`
  <div class="resultado"><strong>Principal:</strong> <span>${principal.join(" - ")}</span></div>
  <div class="resultado"><strong>Respaldo:</strong> <span>${respaldo.join(" - ")}</span></div>`
}

/* ================== HISTORICO ================== */
function guardarHistorico(){
  let lineas=document.getElementById("inputHistorico").value.split("\n").map(l=>l.trim()).filter(l=>l)
  if(lineas.length!==20){alert("Deben ser 20 jugadas");return}

  historicoPoseada=lineas.map(l=>l.split(/[\s,]+/).map(n=>n.padStart(2,"0")))
  localStorage.setItem("historicoPoseada",JSON.stringify(historicoPoseada))
  alert("Hist√≥rico guardado correctamente")
}

/* CARGAR HISTORICO AL ABRIR */
window.addEventListener("load",()=>{
  if(historicoPoseada.length>0){
    document.getElementById("inputHistorico").value=
      historicoPoseada.map(j=>j.join(" ")).join("\n")
  }
})
</script>

</body>
</html>
