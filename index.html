<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tesla Pro + Hist√≥rico Poseada</title>

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff;display:flex;justify-content:center;padding:20px;}
.container{width:100%;max-width:500px;text-align:center;}
h1{color:#00F5E0;margin-bottom:20px;}
h2{color:#FFD700;margin-top:25px;}
input,textarea{width:85%;padding:12px;font-size:16px;border-radius:8px;border:none;margin-bottom:12px;}
textarea{height:120px;}
button{width:90%;padding:14px;font-size:16px;background:#00F5E0;color:#111;border:none;border-radius:10px;margin-bottom:15px;cursor:pointer;}
.resultado{background:#222;padding:12px;border-radius:10px;margin-bottom:12px;text-align:left;}
.resultado span{color:#00FFAA;font-weight:bold;}
.nota{font-size:13px;color:#aaa;margin-bottom:15px;}
</style>
</head>

<body>
<div class="container">

<h1>‚ö° Tesla Pro + Hist√≥rico Poseada</h1>

<h2>Quiniela Tradicional</h2>
<input type="text" id="inputTradicional" placeholder="Ingres√° 4 cifras">
<button onclick="generarTradicional()">Generar Tradicional</button>
<div id="resultadosTradicional"></div>

<h2>Quiniela Poseada Correntina</h2>
<input type="text" id="inputPoseada" placeholder="Ingres√° los 10 n√∫meros del sorteo anterior">
<button onclick="generarPoseada()">Generar Poseada</button>
<div id="resultadosPoseada"></div>

<h2>Hist√≥rico (20 jugadas)</h2>
<textarea id="inputHistorico" placeholder="20 jugadas, una por l√≠nea, cada una con 10 n√∫meros"></textarea>
<button onclick="guardarHistorico()">Guardar Hist√≥rico</button>
<div class="nota">Se guarda autom√°ticamente en el navegador.</div>

</div>

<script>

// ================= TABLA TESLA =================
const tablaTesla={
0:['0','0'],1:['0','0'],2:['5','7'],3:['8','0'],
4:['6','9'],5:['2','7'],6:['4','9'],7:['5','2'],
8:['3','0'],9:['3','4']
};

const agencias=["Corrientes","Ciudad","Bonaerense","Santa Fe","C√≥rdoba","Entre R√≠os","Chaco"];

let historicoPoseada=JSON.parse(localStorage.getItem('historicoPoseada'))||[];

// ================= FUNCIONES AUXILIARES =================

function energiaNumero(num){
let suma=num.split('').reduce((a,b)=>a+parseInt(b),0);
if(suma%3===0)return "‚òÄÔ∏è Ma√±ana";
if(suma%3===1)return "üåÜ Tarde";
return "üåô Noche";
}

function agenciaPorNumero(num){
let n=parseInt(num[0]);
return agencias[n%agencias.length];
}

function sugerenciaJugada(c,t,a){
if(new Set(c).size===4)return "üéØ Cuaterno";
if(new Set(t).size===3)return "‚úÖ Terno";
return "‚ö° Ambos";
}

// ================= TRADICIONAL =================

function generarTradicional(){

let nro=document.getElementById("inputTradicional").value;
if(nro.length!==4||isNaN(nro)){alert("Ingres√° 4 cifras v√°lidas");return;}

let html="";

for(let i=0;i<2;i++){

let cuaterno="",terno="";

for(let j=0;j<4;j++){
let nums=tablaTesla[parseInt(nro[j])];
cuaterno+=nums[i];
if(j>0)terno+=nums[i];
}

let ambos=cuaterno.slice(2,4);

html+=`
<div class="resultado">
<strong>Jugada ${i+1}</strong><br>
Cuaterno: <span>${cuaterno}</span> (${energiaNumero(cuaterno)}) - Agencia: <span>${agenciaPorNumero(cuaterno)}</span><br>
Terno: <span>${terno}</span> (${energiaNumero(terno)}) - Agencia: <span>${agenciaPorNumero(terno)}</span><br>
Ambos: <span>${ambos}</span> (${energiaNumero(ambos)}) - Agencia: <span>${agenciaPorNumero(ambos)}</span><br>
Sugerencia: <span>${sugerenciaJugada(cuaterno,terno,ambos)}</span>
</div>
`;
}

document.getElementById("resultadosTradicional").innerHTML=html;
}

// ================= POSEADA PONDERADA =================

function generarPoseada(){

let input=document.getElementById("inputPoseada").value
.split(/[\s,]+/)
.map(v=>v.trim())
.filter(v=>v!=="")
.map(v=>v.padStart(2,'0'));

if(input.length!==10){alert("Ingres√° exactamente 10 n√∫meros");return;}

historicoPoseada.push(input);
if(historicoPoseada.length>20)historicoPoseada.shift();

localStorage.setItem('historicoPoseada',JSON.stringify(historicoPoseada));

let frecuencias={};
let total=historicoPoseada.length;

historicoPoseada.forEach((jugada,index)=>{

let peso=1;
let posicion=total-index;

if(posicion<=5)peso=3;
else if(posicion<=10)peso=2;
else peso=1;

jugada.forEach(n=>{
frecuencias[n]=(frecuencias[n]||0)+peso;
});

});

let ordenados=Object.keys(frecuencias)
.sort((a,b)=>frecuencias[b]-frecuencias[a]);

let principal=ordenados.slice(0,5);
let respaldo=ordenados.slice(5,10);

let html=`
<div class="resultado">
<strong>Principal:</strong> <span>${principal.join(" - ")}</span>
</div>
<div class="resultado">
<strong>Respaldo:</strong> <span>${respaldo.join(" - ")}</span>
</div>
`;

document.getElementById("resultadosPoseada").innerHTML=html;
}

// ================= GUARDAR HISTORICO =================

function guardarHistorico(){

let lineas=document.getElementById("inputHistorico").value
.split(/\n+/)
.map(l=>l.trim())
.filter(l=>l!=="");

if(lineas.length!==20){alert("Deben ser exactamente 20 jugadas");return;}

let jugadas=[];

for(let linea of lineas){

let nums=linea.split(/[\s,]+/)
.map(n=>n.trim().padStart(2,'0'));

if(nums.length!==10){alert("Cada jugada debe tener 10 n√∫meros");return;}

jugadas.push(nums);
}

historicoPoseada=jugadas;
localStorage.setItem('historicoPoseada',JSON.stringify(historicoPoseada));

alert("Hist√≥rico guardado correctamente.");
}

</script>

</body>
</html>
