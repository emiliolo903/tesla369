<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Tesla Pro â€“ Quiniela Tradicional</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#111;
  color:#fff;
  text-align:center;
  padding:15px
}
h1{color:#00ffcc}
h2{color:#ffd700;margin-top:25px}
textarea, select, input, button{
  width:100%;
  max-width:420px;
  margin:8px auto;
  display:block;
  padding:10px;
  font-size:16px;
  border-radius:8px;
  border:none
}
button{
  background:#00ffcc;
  font-weight:bold;
  cursor:pointer
}
.resultado{
  margin-top:10px;
  font-size:18px;
  color:#00ffcc
}
.historial{
  margin-top:20px;
  font-size:14px;
  text-align:left;
  max-width:420px;
  margin-left:auto;
  margin-right:auto;
  background:#000;
  padding:10px;
  border-radius:8px
}
hr{border:0;border-top:1px solid #333;margin:10px 0}
</style>
</head>

<body>

<h1>âš¡ Tesla Pro</h1>
<p>Quiniela Tradicional â€“ MÃ©todo Tesla</p>

<!-- GENERADOR TESLA -->
<h2>Generador Tesla</h2>
<textarea id="base" placeholder="Ej: 5 2 7 5 2 7 6 4 9 7"></textarea>
<button onclick="generarTesla()">Generar</button>

<div class="resultado" id="salida"></div>

<!-- REGISTRO -->
<h2>ðŸ“Š Registrar resultado oficial</h2>

<select id="agencia">
  <option>Corrientes</option>
  <option>Nacional</option>
  <option>Provincia</option>
  <option>Santa Fe</option>
  <option>CÃ³rdoba</option>
  <option>Entre RÃ­os</option>
  <option>Chaco</option>
</select>

<select id="horario">
  <option>MaÃ±ana</option>
  <option>Tarde</option>
  <option>Noche</option>
</select>

<input id="numeroOficial" placeholder="NÃºmero que saliÃ³">

<select id="tipo">
  <option>Ambos</option>
  <option>Terno</option>
  <option>Cuaterno</option>
</select>

<button onclick="guardarResultado()">Guardar resultado</button>

<!-- HISTORIAL -->
<h2>ðŸ“ˆ Historial</h2>
<div class="historial" id="historial"></div>

<script>
// ===== UTILIDADES =====
function soloNumeros(t){
  return t.replace(/\D/g,'').split('')
}

// ===== MÃ‰TODO TESLA (igual que antes) =====
let ultimo = {}

function generarTesla(){
  let n = soloNumeros(base.value)
  if(n.length < 4){
    salida.innerHTML = "IngresÃ¡ mÃ¡s nÃºmeros"
    return
  }

  let cuaterno = n.slice(0,4).join('')
  let terno = cuaterno.slice(1)
  let ambos = cuaterno.slice(2)

  // horario sugerido simple por vibraciÃ³n
  let suma = cuaterno.split('').reduce((a,b)=>a+Number(b),0)
  let horario = suma % 3 === 0 ? "MaÃ±ana" : suma % 3 === 1 ? "Tarde" : "Noche"

  ultimo = {cuaterno, terno, ambos}

  salida.innerHTML =
    "Cuaterno: "+cuaterno+
    "<br>Terno: "+terno+
    "<br>Ambos: "+ambos+
    "<br>ðŸ•’ EnergÃ­a: "+horario
}

// ===== REGISTRO Y MEMORIA =====
function guardarResultado(){
  if(!ultimo.cuaterno){
    alert("Primero generÃ¡ con Tesla")
    return
  }

  let data = {
    fecha: new Date().toLocaleString(),
    agencia: agencia.value,
    horario: horario.value,
    numero: numeroOficial.value,
    tipo: tipo.value,
    acierto: calcularAcierto(numeroOficial.value)
  }

  let hist = JSON.parse(localStorage.getItem("teslaHistorial") || "[]")
  hist.push(data)
  localStorage.setItem("teslaHistorial", JSON.stringify(hist))
  mostrarHistorial()
}

// ===== COMPARACIÃ“N =====
function calcularAcierto(num){
  if(num === ultimo.cuaterno) return "âœ… Cuaterno"
  if(num === ultimo.terno) return "âœ… Terno"
  if(num === ultimo.ambos) return "âœ… Ambos"
  return "âŒ"
}

// ===== MOSTRAR HISTORIAL =====
function mostrarHistorial(){
  let hist = JSON.parse(localStorage.getItem("teslaHistorial") || "[]")
  if(hist.length === 0){
    historial.innerHTML = "Sin registros todavÃ­a"
    return
  }

  historial.innerHTML = hist.map(h=>`
    <b>${h.agencia}</b> â€“ ${h.horario}<br>
    NÃºmero: ${h.numero}<br>
    Tipo: ${h.tipo}<br>
    Resultado: ${h.acierto}<br>
    <small>${h.fecha}</small>
    <hr>
  `).join('')
}

mostrarHistorial()
</script>

</body>
</html>
