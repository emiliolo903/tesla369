<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tesla Pro + Hist√≥rico Poseada</title>

<style>
body{margin:0;font-family:Arial;background:#111;color:#fff;display:flex;justify-content:center;padding:20px}
.container{width:100%;max-width:500px;text-align:center}
h1{color:#00F5E0}
h2{color:#FFD700;margin-top:25px}
input,textarea{width:85%;padding:10px;font-size:16px;border-radius:8px;border:none;margin:8px 0}
textarea{height:130px}
button{width:90%;padding:12px;font-size:16px;background:#00F5E0;color:#000;border:none;border-radius:8px;margin-bottom:15px}
.resultado{background:#222;padding:12px;border-radius:10px;margin-bottom:10px;text-align:left}
span{color:#00FFAA;font-weight:bold}
.nota{font-size:13px;color:#aaa}
</style>
</head>

<body>
<div class="container">
<h1>‚ö° Tesla Pro + Hist√≥rico Poseada</h1>

<h2>Quiniela Tradicional</h2>
<input type="text" id="inputTradicional" placeholder="Ingres√° n√∫mero de 4 cifras">
<button onclick="generarTradicional()">Generar Tradicional</button>
<div id="resultadosTradicional"></div>

<h2>Poseada Correntina</h2>
<input type="text" id="inputPoseada" placeholder="Ingres√° los 10 n√∫meros anteriores (00-99)">
<button onclick="generarPoseada()">Generar Poseada</button>
<div id="resultadosPoseada"></div>

<h2>Hist√≥rico (20 jugadas)</h2>
<textarea id="inputHistorico" placeholder="20 jugadas, cada una con 10 n√∫meros"></textarea>
<button onclick="guardarHistorico()">Guardar Hist√≥rico</button>
</div>

<script>

const tablaTesla={
0:['0','0'],1:['0','0'],2:['5','7'],3:['8','0'],
4:['6','9'],5:['2','7'],6:['4','9'],7:['5','2'],
8:['3','0'],9:['3','4']
};

const agencias=["Corrientes","Ciudad","Bonaerense","Santa Fe","C√≥rdoba","Entre R√≠os","Chaco"];

let historicoPoseada=JSON.parse(localStorage.getItem("historicoPoseada"))||[];

window.onload=function(){
  mostrarHistorico();
};

function mostrarHistorico(){
  document.getElementById("inputHistorico").value=
  historicoPoseada.map(j=>j.join(" ")).join("\n");
}

function energia(num){
  let s=num.split('').reduce((a,b)=>a+parseInt(b),0);
  if(s%3===0)return "‚òÄÔ∏è Ma√±ana";
  if(s%3===1)return "üåÜ Tarde";
  return "üåô Noche";
}

function agencia(num){
  return agencias[parseInt(num[0])%agencias.length];
}

function sugerencia(c,t,a){
  if(new Set(c).size===4)return "üéØ Cuaterno";
  if(new Set(t).size===3)return "‚úÖ Terno";
  return "‚ö° Ambos";
}

function generarTradicional(){
  let n=document.getElementById("inputTradicional").value;
  if(n.length!==4||isNaN(n))return alert("N√∫mero inv√°lido");

  let html="";
  for(let i=0;i<2;i++){
    let c="",t="";
    for(let d=0;d<4;d++){
      let v=tablaTesla[n[d]][i];
      c+=v;
      if(d>0)t+=v;
    }
    let a=c.slice(2,4);
    html+=`
    <div class="resultado">
    Cuaterno: <span>${c}</span> (${energia(c)}) - ${agencia(c)}<br>
    Terno: <span>${t}</span> (${energia(t)}) - ${agencia(t)}<br>
    Ambos: <span>${a}</span> (${energia(a)}) - ${agencia(a)}<br>
    ${sugerencia(c,t,a)}
    </div>`;
  }
  document.getElementById("resultadosTradicional").innerHTML=html;
}

function generarPoseada(){
  let entrada=document.getElementById("inputPoseada").value
  .split(/[\s,]+/)
  .filter(x=>x!=="")
  .map(x=>x.padStart(2,"0"));

  if(entrada.length!==10)return alert("Ingres√° 10 n√∫meros");

  historicoPoseada.push(entrada);
  if(historicoPoseada.length>20)historicoPoseada.shift();
  localStorage.setItem("historicoPoseada",JSON.stringify(historicoPoseada));
  mostrarHistorico();

  if(historicoPoseada.length<2)return;

  let base=historicoPoseada.slice(0,-1); // EXCLUYE la √∫ltima jugada

  let freq={};
  base.forEach((jug,i)=>{
    let peso=i+1;
    jug.forEach(n=>{
      freq[n]=(freq[n]||0)+peso;
    });
  });

  let orden=Object.keys(freq).sort((a,b)=>freq[b]-freq[a]);

  let principal=orden.slice(0,5);
  let respaldo=orden.slice(5,10);

  document.getElementById("resultadosPoseada").innerHTML=`
  <div class="resultado"><strong>Principal:</strong> <span>${principal.join(" - ")}</span></div>
  <div class="resultado"><strong>Respaldo:</strong> <span>${respaldo.join(" - ")}</span></div>`;
}

function guardarHistorico(){
  let lineas=document.getElementById("inputHistorico").value
  .split("\n")
  .filter(l=>l.trim()!=="");

  if(lineas.length!==20)return alert("Necesit√°s 20 jugadas");

  historicoPoseada=lineas.map(l=>
    l.split(/[\s,]+/)
    .filter(x=>x!=="")
    .map(x=>x.padStart(2,"0"))
  );

  localStorage.setItem("historicoPoseada",JSON.stringify(historicoPoseada));
  alert("Hist√≥rico guardado correctamente");
}

</script>
</body>
</html>
