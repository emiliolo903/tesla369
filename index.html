<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tesla Pro Poseada</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00F5E0">

<style>
body {margin:0;font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px;}
.container{max-width:500px;margin:auto;}
h1{color:#00F5E0;}
input, textarea{width:90%;padding:10px;margin:10px 0;border-radius:8px;border:none;}
button{width:95%;padding:12px;background:#00F5E0;border:none;border-radius:8px;font-size:16px;}
.resultado{background:#222;padding:12px;margin:10px 0;border-radius:10px;}
</style>
</head>
<body>

<div class="container">
<h1>⚡ Tesla Poseada PRO</h1>

<h2>Poseada Correntina</h2>
<input type="text" id="inputPoseada" placeholder="Ingresá 10 números separados por coma">
<button onclick="generarPoseada()">Generar Jugadas</button>

<div id="resultadosPoseada"></div>

<h3>Histórico (20 jugadas)</h3>
<textarea id="inputHistorico" placeholder="Cada jugada en línea nueva"></textarea>
<button onclick="guardarHistorico()">Guardar Histórico</button>

</div>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}

let historicoPoseada = JSON.parse(localStorage.getItem('historicoPoseada')) || [];

function generarPoseada(){
  let input = document.getElementById('inputPoseada').value
    .split(/[\s,]+/)
    .filter(n=>n!=='')
    .map(n=>n.padStart(2,'0'));

  if(input.length!==10){ alert("Ingresá 10 números"); return; }

  historicoPoseada.push(input);
  if(historicoPoseada.length>20) historicoPoseada.shift();

  localStorage.setItem('historicoPoseada', JSON.stringify(historicoPoseada));

  calcularFrecuencia();
}

function calcularFrecuencia(){
  let frecuencias = {};
  historicoPoseada.forEach(j=>{
    j.forEach(n=>{
      frecuencias[n]=(frecuencias[n]||0)+1;
    });
  });

  let orden = Object.keys(frecuencias)
    .sort((a,b)=>frecuencias[b]-frecuencias[a]);

  let principal = orden.slice(0,5);
  let respaldo = orden.slice(5,10);

  document.getElementById("resultadosPoseada").innerHTML =
    `<div class="resultado"><strong>Principal:</strong> ${principal.join(" - ")}</div>
     <div class="resultado"><strong>Respaldo:</strong> ${respaldo.join(" - ")}</div>`;
}

function guardarHistorico(){
  let lineas = document.getElementById("inputHistorico").value
    .split(/\n+/)
    .filter(l=>l!=='');

  if(lineas.length!==20){
    alert("Tenés que ingresar exactamente 20 jugadas");
    return;
  }

  historicoPoseada = lineas.map(l=>
    l.split(/[\s,]+/)
     .map(n=>n.padStart(2,'0'))
  );

  localStorage.setItem('historicoPoseada', JSON.stringify(historicoPoseada));
  alert("Histórico guardado correctamente");
}
</script>

</body>
</html>
